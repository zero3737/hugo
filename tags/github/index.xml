<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Github on carlos</title><link>https://www.carlos2016.cfd/tags/github/</link><description>Recent content in Github on carlos</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><copyright>Example Person</copyright><lastBuildDate>Sun, 30 Mar 2025 16:10:24 +0000</lastBuildDate><atom:link href="https://www.carlos2016.cfd/tags/github/index.xml" rel="self" type="application/rss+xml"/><item><title>GitHub Pages 自定义域名绑定规则</title><link>https://www.carlos2016.cfd/p/github-pages-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9F%9F%E5%90%8D%E7%BB%91%E5%AE%9A%E8%A7%84%E5%88%99/</link><pubDate>Mon, 17 Mar 2025 03:29:46 +0800</pubDate><guid>https://www.carlos2016.cfd/p/github-pages-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9F%9F%E5%90%8D%E7%BB%91%E5%AE%9A%E8%A7%84%E5%88%99/</guid><description>&lt;img src="https://www.carlos2016.cfd/bg/46.webp" alt="Featured image of post GitHub Pages 自定义域名绑定规则" />&lt;h2 id="官方限制">官方限制
&lt;/h2>&lt;p>&lt;strong>每个仓库仅支持1个自定义域名&lt;/strong>&lt;/p>
&lt;p>无论是用户/组织主站（&lt;code>username.github.io&lt;/code>）还是项目站点（&lt;code>username.github.io/repo&lt;/code>），每个仓库的 CNAME 文件中只能包含‌一个域名‌，且仅首个域名生效‌。&lt;/p>
&lt;p>&lt;strong>用户/组织主站的特殊限制&lt;/strong>&lt;/p>
&lt;p>每个 GitHub 账户只能存在一个用户/组织主站仓库（即 &lt;code>username.github.io&lt;/code>），且该主站仅能绑定‌1个自定义域名‌‌。&lt;/p>
&lt;h2 id="突破限制的实践方案">突破限制的实践方案
&lt;/h2>&lt;p>&lt;strong>多仓库绑定不同域名&lt;/strong>&lt;/p>
&lt;p>通过创建多个项目仓库（如 project1、project2），每个仓库可独立绑定不同的自定义域名。例如：&lt;/p>
&lt;ul>
&lt;li>project1 仓库绑定 &lt;code>domain1.com&lt;/code>&lt;/li>
&lt;li>project2 仓库绑定 domain2.com‌。&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>通过外部服务实现多域名指向&lt;/strong>&lt;/p>
&lt;p>利用 DNS 或 CDN 服务（如 Cloudflare）进行域名重定向或转发：&lt;/p>
&lt;ul>
&lt;li>将多个域名的 DNS 解析指向同一 GitHub Pages 仓库的服务器 IP；&lt;/li>
&lt;li>通过 CDN 的 URL 转发规则，将不同域名跳转到目标页面‌。&lt;/li>
&lt;/ul>
&lt;h2 id="总结">总结
&lt;/h2>&lt;p>综上，‌单个 GitHub Pages 仓库仅支持1个自定义域名‌，但通过多仓库或外部服务可实现多域名间接绑定‌。&lt;/p></description></item><item><title>在 GitHub 上查看自己加星（star）的项目</title><link>https://www.carlos2016.cfd/p/%E5%9C%A8-github-%E4%B8%8A%E6%9F%A5%E7%9C%8B%E8%87%AA%E5%B7%B1%E5%8A%A0%E6%98%9Fstar%E7%9A%84%E9%A1%B9%E7%9B%AE/</link><pubDate>Mon, 17 Mar 2025 02:49:26 +0800</pubDate><guid>https://www.carlos2016.cfd/p/%E5%9C%A8-github-%E4%B8%8A%E6%9F%A5%E7%9C%8B%E8%87%AA%E5%B7%B1%E5%8A%A0%E6%98%9Fstar%E7%9A%84%E9%A1%B9%E7%9B%AE/</guid><description>&lt;img src="https://www.carlos2016.cfd/bg/26.webp" alt="Featured image of post 在 GitHub 上查看自己加星（star）的项目" />&lt;h2 id="前言">前言
&lt;/h2>&lt;p>如何在 github 页面查看自己 star 的项目&lt;/p>
&lt;h2 id="实操">实操
&lt;/h2>&lt;p>点击头像&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250317024019.webp"
data-webp="/00-assets/Pasted%20image%2020250317024019.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250317024019.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250317024019.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250317024019.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>仓库导航栏点击 stars，即可查看自己 stars 项目了&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250317024047.webp"
data-webp="/00-assets/Pasted%20image%2020250317024047.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250317024047.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250317024047.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250317024047.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p></description></item><item><title>pages 服务套 cloudFront cdn</title><link>https://www.carlos2016.cfd/p/pages-%E6%9C%8D%E5%8A%A1%E5%A5%97-cloudfront-cdn/</link><pubDate>Sun, 16 Mar 2025 22:01:59 +0800</pubDate><guid>https://www.carlos2016.cfd/p/pages-%E6%9C%8D%E5%8A%A1%E5%A5%97-cloudfront-cdn/</guid><description>&lt;img src="https://www.carlos2016.cfd/bg/59.webp" alt="Featured image of post pages 服务套 cloudFront cdn" />&lt;h2 id="前言">前言
&lt;/h2>&lt;p>pages 服务如何套 cloudFront cdn，加速国内网络。前提，必须拥有一张国内信用卡，不是储蓄卡。aws 账号不要作弊！不要作弊！不要作弊！&lt;/p>
&lt;h3 id="cloudfront-免费套餐">CloudFront 免费套餐
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-txt" data-lang="txt">&lt;span class="line">&lt;span class="cl">AWS 免费套餐
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1TB 的数据传出
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1000 万次 HTTP 或 HTTPS 请求
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">200 万次 CloudFront 函数调用
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">每个月，永远免费
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="原理解析">原理解析
&lt;/h3>&lt;p>&lt;strong>Cloudflare 的模式&lt;/strong>&lt;/p>
&lt;p>你需要在你购买域名的网站(比如可能是阿里云，可能是 namesilo，可能是 freenom 等等)那边把你的域名服务器(英文NameServer，一般简称NS)修改为 Cloudflare 的NS服务器，也就是说，需要 Cloudflare全面接管你的域名，接管后，你想要添加DNS解析(添加A记录)，就需要在 Cloudflare 中添加，而不是在你购买域名的服务商那边添加，添加解析时，把小云朵的开关打开，就会走 cdn，不打开就不会走 cdn。&lt;/p>
&lt;p>&lt;strong>CloudFront 模式&lt;/strong>&lt;/p>
&lt;p>AWS 的 CloudFront 与 Cloudflare 工作模式不同，你无需(也无法)把你的域名交给 CloudFront 接管，要使用 CloudFront 做cdn，你需要准备两个域名：&lt;/p>
&lt;ul>
&lt;li>你要套cdn的域名(A域名)：假设为“aa.test.com”；&lt;/li>
&lt;li>源域名(B域名)：假设为“bb.test.com”。cdn是用于加速用的，你需要告诉cdn你要加速的内容(图片、视频、网站)存放在哪台服务器上，但不能填ip，只能填域名，所以你需要解析一个域名到你要加速的服务器上，这个域名就叫“源域名”。&lt;/li>
&lt;/ul>
&lt;p>CloudFront cdn 加速原理：就是把B域名(&lt;code>bb.test.com&lt;/code>)解析到你的服务器上，然后在 CloudFront 的“选择源域”中填写B域名，这样 CloudFront 就知道你要加速的服务器是哪个服务器，最后它会自动生成一个&lt;code>xxx.cloudfront.net&lt;/code>域名作为加速域名，然后你需要把你的网站域名(即你要套cdn的域名)“&lt;code>aa.test.com&lt;/code>” cname 到“&lt;code>xxx.cloudfront.net&lt;/code>”，最终效果就是你访问&lt;code>aa.test.com&lt;/code>其实是在访问&lt;code>xxx.cloudfront.net&lt;/code>(当然这是 cname，不是 301/302 跳转)，而&lt;code>xxx.cloudfront.net&lt;/code>是 CloudFront 的域名，它会对应前面B域名所对应的那个网站。&lt;/p>
&lt;h3 id="举例说明">举例说明
&lt;/h3>&lt;p>假设你现在有如下域名和服务器&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-txt" data-lang="txt">&lt;span class="line">&lt;span class="cl">A域名：aa.test.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">B域名: bb.test.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">服务器：11.22.33.44
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ol>
&lt;li>假设你想把A域名(&lt;code>aa.test.com&lt;/code>)套到cloudflare cdn上，用cdn来加速这个域名；&lt;/li>
&lt;li>那么你需要先把B域名(&lt;code>bb.test.com&lt;/code>)解析到你的服务器(11.22.33.44)；&lt;/li>
&lt;li>然后把B域名(&lt;code>bb.test.com&lt;/code>)填到 CloudFront 的“选择源域”里，把A域名(&lt;code>aa.test.com&lt;/code>)填到“备用域名(CNAME)”里(这一栏与前一栏不是挨着，需要往下滚动很多才能看到)；&lt;/li>
&lt;li>然后填好其它选项后，最终创建好之后，它会生成一个“&lt;code>xxx.cloudfront.net&lt;/code>”格式的域名，这个域名就是 CloudFront 给你分配的加速域名，比如你之前访问一张图片是这样访问的：&lt;code>aa.test.com/imgs/1.jpg&lt;/code>，而用了cdn之后就是：&lt;code>xxx.cloudfront.net/imgs/1.jpg&lt;/code>；&lt;/li>
&lt;/ol>
&lt;p>按第4步的说法，虽然cdn可以加速，可是域名就变了，这是不可接受的，这就要用到前面第3步填的“备用域名”了，其实我觉得把它叫“自定义域名”更好一点，你需要添加一条DNS解析(CNAME记录)，把你在“备用域名”那一栏填的那个域名(&lt;code>aa.test.com&lt;/code>)添加一个cname，对应到 CloudFront 给你分配的加速域名“&lt;code>xxx.cloudfront.net&lt;/code>”，最终的请求的流向为&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-txt" data-lang="txt">&lt;span class="line">&lt;span class="cl">aa.test.com ====cname===&amp;gt; xxx.cloudfront.net ===&amp;gt; CDN服务器 ===bb.test.com===&amp;gt; 源服务器
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="aws-控制台">aws 控制台
&lt;/h2>&lt;p>打开以下地址，点击注册。创建账号不要作弊！不要作弊！不要作弊！&lt;/p>
&lt;p>&lt;a class="link" href="https://aws.amazon.com/cn/cloudfront/" target="_blank" rel="noopener"
>Amazon CloudFront 内容分发网络(CDN)_免费CDN加速-AWS云服务&lt;/a>
&lt;/p>
&lt;p>登录控制台，搜索 CloudFront 服务，&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316210608.webp"
data-webp="/00-assets/Pasted%20image%2020250316210608.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316210608.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316210608.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316210608.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>创建分配&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316210746.webp"
data-webp="/00-assets/Pasted%20image%2020250316210746.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316210746.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316210746.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316210746.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>然后在下图的“选择源域”中填写一个“源域名”&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316212250.webp"
data-webp="/00-assets/Pasted%20image%2020250316212250.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316212250.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316212250.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316212250.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>注意这个域名不能是你要套cdn的域名，这个域名只是用来告诉 CloudFront：“喂，你要加速的内容是&lt;code>abc.examle.com&lt;/code>服务器中，记得给它加速哟”；它只能填域名，不能直接填ip，所以我们需要解析一个域名指向这个ip(你VPS的ip)，用域名的方式来告诉 CloudFront，告诉它要给哪台服务器的内容加速，这个域名我们叫“源域名”，它指向将要被加速的“源服务器”(就是你的VPS)；匹配查看器，其实就是匹配浏览器，“查看器”其实是browser的翻译，本来应该翻译为浏览器的，这aws的翻译也是厉害，不知道为什么会翻译成查看器的。&lt;/p>
&lt;p>接着往下，这些按默认就可以。这里选择源域填了之后，自动和前面的一样，不用理会。&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316212456.webp"
data-webp="/00-assets/Pasted%20image%2020250316212456.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316212456.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316212456.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316212456.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>缓存策略选择“CachingDisabled”(禁用缓存)，源请求策略选择“AllViewer”。这里能禁用就禁用，其他服务需要收费，aws 服务小心一点。&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316212700.webp"
data-webp="/00-assets/Pasted%20image%2020250316212700.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316212700.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316212700.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316212700.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>禁用防火墙，这是收费服务&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316212837.webp"
data-webp="/00-assets/Pasted%20image%2020250316212837.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316212837.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316212837.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316212837.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>这里“价格与级别”，看你的服务器在哪儿，一般来说第一个和第三个都可以，仅北美和欧洲肯定不行，因为你在国内是亚洲，它不对亚洲加速的话，你要它来干嘛。这个价格可以不用太在意，因为你个人使用不超过免费用量是不会收费的。特别注意这里的“备用域名(CNAME)”一栏要填“你真正要套cdn的域名”(就是你的网站域名，就是你要加速的域名)&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316212917.webp"
data-webp="/00-assets/Pasted%20image%2020250316212917.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316212917.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316212917.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316212917.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>这里要选择证书，点击“请求证书”来申请一个证书，点击后它会在另一个标签中打开新页面，这个证书不需要我们源域名(&lt;code>bb.test.com&lt;/code>)或网站域名(&lt;code>bb.test.com&lt;/code>)的证书，就是说这个证书归这个证书，跟你自己域名的证书无关&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316213003.webp"
data-webp="/00-assets/Pasted%20image%2020250316213003.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316213003.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316213003.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316213003.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>默认下一步即可，证书认证，不然 cdn 加速失败&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316213202.webp"
data-webp="/00-assets/Pasted%20image%2020250316213202.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316213202.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316213202.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316213202.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>以 &lt;code>*.baidu.com&lt;/code> 为例子，填你拥有的地址，dns 验证，默认下一步即可。&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316213302.webp"
data-webp="/00-assets/Pasted%20image%2020250316213302.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316213302.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316213302.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316213302.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>在域名控制台添加对应的记录，添加完等待认证成功即可。&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316213502.webp"
data-webp="/00-assets/Pasted%20image%2020250316213502.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316213502.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316213502.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316213502.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>认证成功截图&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316213620.webp"
data-webp="/00-assets/Pasted%20image%2020250316213620.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316213620.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316213620.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316213620.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>回到之前请求证书的地方，点击右侧的“刷新”按钮，然后下拉菜单中就可以选择刚刚请求的证书了&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316213754.webp"
data-webp="/00-assets/Pasted%20image%2020250316213754.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316213754.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316213754.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316213754.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>下图都默认就行，或者把 http3 也选上，最终点“创建分配”&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316213837.webp"
data-webp="/00-assets/Pasted%20image%2020250316213837.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316213837.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316213837.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316213837.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>可以看到显示创建成功，它会给你分配一个“分配域名”，然后下边还会有一个“备用域名”，这时你就会比较明白什么叫备用域名了，因为它已经给你分配了，你直接用它分配的域名就能用，但是用我们自己的域名通过添加cname后，也是可以走cdn加速的，所以才叫“备用域名”&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316213950.webp"
data-webp="/00-assets/Pasted%20image%2020250316213950.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316213950.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316213950.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316213950.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>这两个域名都可以用来访问你的网站，只不过备用域名的好处就是自定义，更像是你自己的域名，而自动分配的域名就统一是 CloudFront 的域名(如果是做代理用的话，用 CloudFront 分配的域名也没什么，就是可能不容易记住)。&lt;/p>
&lt;p>&lt;code>www.carlos2016.cfd&lt;/code> 为 &lt;code>dcrl3j7vhd2m7.cloudfront.net&lt;/code> 别名&lt;/p>
&lt;p>如果你想使用自定义域名(即上图的“备用域名”)，你需要在域名解析服务商那边添加一个cname记录，把自己要套cdn的域名作为名称，而把 CloudFront 给你分配的域名作为“目标”，添加之后就可以使用它了。&lt;/p>
&lt;p>按照本例的示例域名，aa.test.com就是套了cdn的域名，你用aa.test.com访问你的网站就是走了cdn的，而bb.test.com则是一个用来中转用的域名，真实使用的时候并不使用它&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-txt" data-lang="txt">&lt;span class="line">&lt;span class="cl">aa.test.com ====cname===&amp;gt; xxx.cloudfront.net ===&amp;gt; CDN服务器 ===bb.test.com===&amp;gt; 源服务器
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="服务器端操作">服务器端操作
&lt;/h2>&lt;p>CloudFront 会通过443端口和80端口，即https和http协议去请求你的服务器，你必须在你的服务器配置前面所说的“A域名”(套cdn的域名)和“B域名”(源域名)，如果是nginx，则server_name应该把&lt;code>aa.test.com&lt;/code>和&lt;code>bb.test.com&lt;/code>都写上&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-nginx" data-lang="nginx">&lt;span class="line">&lt;span class="cl">&lt;span class="k">server&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">listen&lt;/span> &lt;span class="mi">80&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">server_name&lt;/span> &lt;span class="s">aa.test.com&lt;/span> &lt;span class="s">bb.test.com&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">……&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>bb.test.com&lt;/code>作为源域名，不用说肯定要配置的，不然CDN服务器没法通过这个域名获取到源站的内容，而&lt;code>aa.test.com&lt;/code>是cname到&lt;code>xxx.cloudfront.net&lt;/code>，理论上来说&lt;code>aa.test.com&lt;/code>并没有直接参与访问你服务器的内容，为什么它也要在nginx中配置呢？&lt;/p>
&lt;p>原因是，你在浏览器(或其它客户端)发起请求的时候，用的是&lt;code>aa.test.com&lt;/code>，虽然DNS那边最终会把cname的域名(即&lt;code>xxx.cloudfront.net&lt;/code>)对应的ip返回，但浏览器并不知道这个ip是cname那边的，所以GET请求中header中的Host值还是&lt;code>aa.test.com&lt;/code>，这个请求最终会被CDN服务器转发到你的VPS中，那么VPS中的nginx接收到这个请求，就会根据Host值判断应该用哪个server模块来处理你的请求(如果你同一个端口有多个模块的话)，当然如果同一端口只有一个模块，其实server_name可以不写&lt;code>bb.test.com&lt;/code>，因为只有一个它默认就进去了，但建议还是写比较好。&lt;/p>
&lt;p>另外，server模块中的证书，一般来说用通配符证书都是能匹配上，如果是单独指定多个域名，申请证书时记得把&lt;code>aa.test.com&lt;/code>和&lt;code>bb.test.com&lt;/code>的证书都加上。&lt;/p>
&lt;h2 id="pages-服务-cdn-加速">pages 服务 cdn 加速
&lt;/h2>&lt;p>填写 github 分配的地址即可，操作和上面的一样&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316215350.webp"
data-webp="/00-assets/Pasted%20image%2020250316215350.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316215350.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316215350.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316215350.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>域名控制台添加 cname 记录，将自己购买的域名指向 CloudFront 分配的域名&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316215444.webp"
data-webp="/00-assets/Pasted%20image%2020250316215444.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316215444.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316215444.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316215444.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>pages 自定义域名填写自己购买的域名&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316215706.webp"
data-webp="/00-assets/Pasted%20image%2020250316215706.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316215706.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316215706.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316215706.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>然后 cmd 测试，返回数据出现 CloudFront 特有的标记，就证明 cdn 开启成功&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316215901.webp"
data-webp="/00-assets/Pasted%20image%2020250316215901.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316215901.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316215901.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316215901.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>点击以下在线测试工具，就会发现中国绿&lt;/p>
&lt;p>&lt;a class="link" href="https://www.itdog.cn/ping/" target="_blank" rel="noopener"
>在线ping_多地ping_多线路ping_持续ping_网络延迟测试_服务器延迟测试&lt;/a>
&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316220034.webp"
data-webp="/00-assets/Pasted%20image%2020250316220034.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316220034.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316220034.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250316220034.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p></description></item><item><title>github pages 默认 cdn</title><link>https://www.carlos2016.cfd/p/github-pages-%E9%BB%98%E8%AE%A4-cdn/</link><pubDate>Sat, 15 Mar 2025 00:05:46 +0800</pubDate><guid>https://www.carlos2016.cfd/p/github-pages-%E9%BB%98%E8%AE%A4-cdn/</guid><description>&lt;img src="https://www.carlos2016.cfd/bg/46.webp" alt="Featured image of post github pages 默认 cdn" />&lt;h2 id="前言">前言
&lt;/h2>&lt;p>介绍 github pages 默认 cdn 服务&lt;/p>
&lt;h2 id="介绍">介绍
&lt;/h2>&lt;p>GitHub Pages 默认启用了基础的 CDN 加速服务，但其加速范围主要面向全球网络而非特定区域。&lt;/p>
&lt;p>‌&lt;strong>默认 CDN 情况‌&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>GitHub Pages ‌自带基础 CDN 加速‌，无论使用默认的 xxx.github.io 域名还是自定义域名，均通过 GitHub 的 CDN 分发静态资源‌。&lt;/li>
&lt;li>该 CDN 的节点分布以‌海外为主‌，国内访问时可能出现速度不稳定或延迟较高的情况‌。&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>加速优化方案&lt;/strong>&lt;/p>
&lt;p>若需提升国内访问速度，可额外配置第三方 CDN 服务&lt;/p>
&lt;ul>
&lt;li>海外 CDN‌（如 Cloudflare）：通过修改 DNS 解析将域名指向 CDN 服务商，利用其全球节点加速访问‌。&lt;/li>
&lt;li>国内 CDN‌（如阿里云/腾讯云）：需备案域名后，将源站设置为 GitHub Pages 默认域名，并通过 CDN 服务商缓存资源，优化国内线路‌。&lt;/li>
&lt;/ul>
&lt;p>综上，GitHub Pages 默认提供基础 CDN，但如需针对性优化访问速度（尤其是国内），需自行集成第三方服务‌。&lt;/p></description></item><item><title>白嫖腾讯云国际 pages 服务</title><link>https://www.carlos2016.cfd/p/%E7%99%BD%E5%AB%96%E8%85%BE%E8%AE%AF%E4%BA%91%E5%9B%BD%E9%99%85-pages-%E6%9C%8D%E5%8A%A1/</link><pubDate>Fri, 14 Mar 2025 20:23:05 +0800</pubDate><guid>https://www.carlos2016.cfd/p/%E7%99%BD%E5%AB%96%E8%85%BE%E8%AE%AF%E4%BA%91%E5%9B%BD%E9%99%85-pages-%E6%9C%8D%E5%8A%A1/</guid><description>&lt;img src="https://www.carlos2016.cfd/bg/05.webp" alt="Featured image of post 白嫖腾讯云国际 pages 服务" />&lt;h2 id="前言">前言
&lt;/h2>&lt;p>腾讯云国际 pages 服务，呵呵，速度堪忧&lt;/p>
&lt;h2 id="创建账号">创建账号
&lt;/h2>&lt;p>腾讯云不用完成注册，有个账号就行了，什么电话卡和银行卡我都没绑（如果他不让你登录就直接点下面page创建链接即可。&lt;/p>
&lt;p>&lt;a class="link" href="https://console.tencentcloud.com/edgeone/pages?action=create" target="_blank" rel="noopener"
>注册腾讯云国际账号&lt;/a>
&lt;/p>
&lt;p>注册完账号，不要绑定信息，我是绑定谷歌账号，填写密码，直接退出，直接点击腾讯控制台就能使用 pages 服务了。我并没有完成注册，也可以登录控制台。&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250314201343.webp"
data-webp="/00-assets/Pasted%20image%2020250314201343.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250314201343.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250314201343.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250314201343.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;h2 id="创建项目">创建项目
&lt;/h2>&lt;p>创建项目，github 授权，填写配置就能自动化构建。&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250314201633.webp"
data-webp="/00-assets/Pasted%20image%2020250314201633.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250314201633.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250314201633.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250314201633.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>配置参数&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-txt" data-lang="txt">&lt;span class="line">&lt;span class="cl">HUGO_VERSION=0.125.7 HUGO_ENV=production hugo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">npm install
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250314201823.webp"
data-webp="/00-assets/Pasted%20image%2020250314201823.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250314201823.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250314201823.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250314201823.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;h2 id="自定义域名">自定义域名
&lt;/h2>&lt;p>如果 https 访问不成功，在域名服务商后台配置 https 证书认证即可。dns 服务器添加 txt 记录认证。&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250314202054.webp"
data-webp="/00-assets/Pasted%20image%2020250314202054.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250314202054.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250314202054.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250314202054.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p></description></item><item><title>hugo 配置 webp 图片压缩</title><link>https://www.carlos2016.cfd/p/hugo-%E9%85%8D%E7%BD%AE-webp-%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9/</link><pubDate>Thu, 13 Mar 2025 18:47:06 +0800</pubDate><guid>https://www.carlos2016.cfd/p/hugo-%E9%85%8D%E7%BD%AE-webp-%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9/</guid><description>&lt;img src="https://www.carlos2016.cfd/bg/06.webp" alt="Featured image of post hugo 配置 webp 图片压缩" />&lt;h2 id="前言">前言
&lt;/h2>&lt;p>hugo 整合 cwebp，自动化工作流。&lt;/p>
&lt;p>‌cwebp 是谷歌官方开发的工具‌，属于 WebP 技术套件的一部分。该工具专门用于将其他格式的图片（如 PNG、JPEG）转换为 WebP 格式，其核心功能围绕谷歌提出的 WebP 图像格式标准实现‌。&lt;/p>
&lt;h2 id="安装">安装
&lt;/h2>&lt;p>&lt;strong>更新软件包列表&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo apt update
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>安装 webp 工具包&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo apt install webp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>验证安装&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">cwebp -version
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="压缩脚本">压缩脚本
&lt;/h2>&lt;p>将路径替换成脚本内容&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 示例脚本：convert_images.sh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 说明 hugo 图片压缩脚本，需要安装 cwebp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#!/bin/bash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 遍历 content/images 目录下的 PNG/JPG 图片&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">find /root/hugo/static/bg -type f -name &lt;span class="s2">&amp;#34;*.png&amp;#34;&lt;/span> -o -name &lt;span class="s2">&amp;#34;*.jpg&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="k">while&lt;/span> &lt;span class="nb">read&lt;/span> img&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">webp_path&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">img&lt;/span>&lt;span class="p">%.*&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">.webp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 调用 cwebp 转换（需提前安装 cwebp 工具）&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cwebp -q &lt;span class="m">80&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$img&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> -o &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$webp_path&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="修改模板文件">修改模板文件
&lt;/h2>&lt;p>修改文章图片&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313184235.webp"
data-webp="/00-assets/Pasted%20image%2020250313184235.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313184235.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313184235.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313184235.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>&lt;code>/root/hugo/themes/hugo-theme-stack/layouts/_default/_markup/render-image.html&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">{{- $originalURL := $fullURL -}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{- $webpURL := replaceRE `(\.[a-z]+)$` `.webp` $originalURL | relURL -}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{- $decodedPath := replace $webpURL &amp;#34;%20&amp;#34; &amp;#34; &amp;#34; -}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{- $webpExists := fileExists (path.Join &amp;#34;static&amp;#34; (strings.TrimPrefix &amp;#34;/&amp;#34; $decodedPath)) -}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">data-fancybox&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;gallery&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;{{ if $webpExists }}{{ $webpURL }}{{ else }}{{ $originalURL }}{{ end }}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">data-webp&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;{{ $webpURL }}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">data-original&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;{{ $originalURL }}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;webp-fancybox&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">picture&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{ if $webpExists }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c">&amp;lt;!-- 第一重回退：服务端确认存在的 WebP --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">source&lt;/span> &lt;span class="na">srcset&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;{{ $webpURL }}&amp;#34;&lt;/span> &lt;span class="na">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;image/webp&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{ end }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c">&amp;lt;!-- 终极回退：原始图片 --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">img&lt;/span> &lt;span class="na">src&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;{{ $originalURL }}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">alt&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;{{ .Text }}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">{{&lt;/span> &lt;span class="na">with&lt;/span> &lt;span class="err">.&lt;/span>&lt;span class="na">Title&lt;/span> &lt;span class="err">}}&lt;/span>&lt;span class="na">title&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;{{ . }}&amp;#34;&lt;/span>&lt;span class="err">{{&lt;/span> &lt;span class="na">end&lt;/span> &lt;span class="err">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">loading&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;lazy&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">data-fallback&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">picture&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>修改封面&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313184258.webp"
data-webp="/00-assets/Pasted%20image%2020250313184258.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313184258.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313184258.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313184258.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>&lt;code>/root/hugo/themes/hugo-theme-stack/layouts/partials/article/components/header.html&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="c">&amp;lt;!-- 自定义变量 --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{- $originalPath := $image.permalink -}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{- $webpPath := replaceRE `(\.[a-z]+)$` `.webp` $originalPath -}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{- $webpExists := fileExists (path.Join &amp;#34;static&amp;#34; $webpPath) -}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">picture&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;webp-fallback&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{ if $webpExists }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">source&lt;/span> &lt;span class="na">srcset&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;{{ $webpPath }}&amp;#34;&lt;/span> &lt;span class="na">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;image/webp&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{ end }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">img&lt;/span> &lt;span class="na">src&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;{{ $originalPath }}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">loading&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;lazy&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">alt&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;Featured image of post {{ .Title }}&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">picture&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>修改归档图片&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313184331.webp"
data-webp="/00-assets/Pasted%20image%2020250313184331.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313184331.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313184331.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313184331.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>&lt;code>/root/hugo/themes/hugo-theme-stack/layouts/partials/article-list/compact.html&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="c">&amp;lt;!-- 自定义变量 --&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{- $originalPath := $image.permalink -}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{- $webpPath := replaceRE `(\.[a-z]+)$` `.webp` $originalPath -}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{- $webpExists := fileExists (path.Join &amp;#34;static&amp;#34; $webpPath) -}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">picture&lt;/span> &lt;span class="na">class&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;webp-fallback&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{ if $webpExists }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">source&lt;/span> &lt;span class="na">srcset&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;{{ $webpPath }}&amp;#34;&lt;/span> &lt;span class="na">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;image/webp&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{ end }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">img&lt;/span> &lt;span class="na">src&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;{{ $originalPath }}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">loading&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;lazy&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="na">alt&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;Featured image of post {{ .Title }}&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">picture&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="github--action">github action
&lt;/h2>&lt;p>添加代码&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Install cwebp&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">sudo apt-get install webp&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Compress images&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> chmod +x /home/runner/work/hugo/hugo/convert_images.sh
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> /home/runner/work/hugo/hugo/convert_images.sh&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>完整代码截图，根据自己实际情况添加&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313184553.webp"
data-webp="/00-assets/Pasted%20image%2020250313184553.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313184553.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313184553.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313184553.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>这样在提交代码的时候，就会自动化压缩图片以及 hugo 生成静态文件&lt;/p></description></item><item><title>cloudns 托管到 cloudflare</title><link>https://www.carlos2016.cfd/p/cloudns-%E6%89%98%E7%AE%A1%E5%88%B0-cloudflare/</link><pubDate>Thu, 13 Mar 2025 02:28:40 +0800</pubDate><guid>https://www.carlos2016.cfd/p/cloudns-%E6%89%98%E7%AE%A1%E5%88%B0-cloudflare/</guid><description>&lt;img src="https://www.carlos2016.cfd/bg/40.webp" alt="Featured image of post cloudns 托管到 cloudflare" />&lt;h2 id="前言">前言
&lt;/h2>&lt;p>cloudns(免费域名)托管到 cloudflare，正常购买的域名，只要在域名服务商管理后台添加 2 条 dns 记录，就能正常托管 cloudflare，但是免费域名需要额外配置。&lt;/p>
&lt;h2 id="操作">操作
&lt;/h2>&lt;p>注册cloudns：&lt;a class="link" href="https://www.cloudns.net/" target="_blank" rel="noopener"
>地址1&lt;/a>
&lt;/p>
&lt;p>一个账号只能申请一个域名，点击这里申请&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313015351.webp"
data-webp="/00-assets/Pasted%20image%2020250313015351.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313015351.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313015351.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313015351.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>申请免费域名即可&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313015415.webp"
data-webp="/00-assets/Pasted%20image%2020250313015415.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313015415.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313015415.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313015415.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>点击申请的域名，进行 dns 记录添加&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313015446.webp"
data-webp="/00-assets/Pasted%20image%2020250313015446.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313015446.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313015446.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313015446.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>然后 cloudflare 域名托管，默认操作即可，点击下一步，点击下一步&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313015648.webp"
data-webp="/00-assets/Pasted%20image%2020250313015648.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313015648.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313015648.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313015648.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>域名管理后台添加 dns 记录，根据自己实际情况填写&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-txt" data-lang="txt">&lt;span class="line">&lt;span class="cl">类型 NS 主机 留空 指向到 ready.ns.cloudflare.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">类型 NS 主机 留空 指向到 auth.ns.cloudflare.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">类型 NS 主机 _acme-challenge 指向到 ready.ns.cloudflare.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">类型 NS 主机 _acme-challenge 指向到 auth.ns.cloudflare.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">类型 CNAME 主机 * 指向到 ready.ns.cloudflare.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>将 ns 记录改成自己的&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313015841.webp"
data-webp="/00-assets/Pasted%20image%2020250313015841.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313015841.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313015841.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313015841.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>dns 记录配置参考，正常域名只要添加 2 条 ns 记录就能托管在 cloudflare，但是我用的是免费域名&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313020057.webp"
data-webp="/00-assets/Pasted%20image%2020250313020057.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313020057.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313020057.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313020057.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>添加 7 条 dns 记录，可以不用配置 cloudflare 边缘证书，也不用更改“SSL/TLS 加密”模式&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-txt" data-lang="txt">&lt;span class="line">&lt;span class="cl">类型 NS 主机 留空 指向到 ready.ns.cloudflare.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">类型 NS 主机 留空 指向到 auth.ns.cloudflare.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">类型 NS 主机 _acme-challenge 指向到 ready.ns.cloudflare.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">类型 NS 主机 _acme-challenge 指向到 auth.ns.cloudflare.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">类型 NS 主机 maintunnel 指向到 ready.ns.cloudflare.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">类型 NS 主机 maintunnel 指向到 auth.ns.cloudflare.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">类型 CNAME 主机 * 指向到 maintunnel.mydns.ip-ddns.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>如果使用的是7条域名记录，那么须要在cloudflare添加一条CNAME记录&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>类型 CNAME 主机 maintunnel 指向到 &lt;code>fast-fast.asuscomm.com&lt;/code>&lt;/li>
&lt;li>或指向到 &lt;code>cloudflare.182682.xyz&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>看这个域名应该是使用第三方服务，呵呵。&lt;/p>
&lt;p>以上是实现了子级域名的基本操作，以后子级域名只需要在cloudflare上操作即可。&lt;/p>
&lt;p>对于主域名 mydns.ip-ddns.com 的解析操作分为两种情况（假设服务器IP是 10.20.30.40）
完全走CDN 【推荐使用这种方案】&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-txt" data-lang="txt">&lt;span class="line">&lt;span class="cl">#cloudns
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">类型 A 主机 留空 指向到 104.18.15.19
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#cloudflare 开启小黄云
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">类型 A 主机 @ 指向到 10.20.30.40 并开启小黄云
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>完全不走 CDN 【仅需要原始解析时使用】&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-txt" data-lang="txt">&lt;span class="line">&lt;span class="cl">#cloudns
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">类型 A 主机 留空 指向到 10.20.30.40
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#cloudflare 不开启小黄云
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">类型 A 主机 @ 指向到 10.20.30.40
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>最后回到 cloudflare,大概 5 分钟左右就会看到域名已经生效可用。不管是 A、AAAA 还是隧道都要记得开启小黄云&lt;code>Proxied&lt;/code>&lt;/p>
&lt;p>经过以上的操作就可以让 cloudns 在 cloudflare 上愉快的撒欢了。&lt;/p>
&lt;p>我这里为 github pages 套 cdn，cloudflare dns 记录添加 a 记录指向以下 ip 地址即可&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-txt" data-lang="txt">&lt;span class="line">&lt;span class="cl">185.199.108.153
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">185.199.109.153
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">185.199.110.153
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">185.199.111.153
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>参考配置&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313021313.webp"
data-webp="/00-assets/Pasted%20image%2020250313021313.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313021313.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313021313.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313021313.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>然后在 cloudns 域名管理后台添加一条 a 记录，ip 地址为默认 ip，不需要改变，照着抄就可以了，应该是 cloudflare ip 地址&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313021422.webp"
data-webp="/00-assets/Pasted%20image%2020250313021422.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313021422.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313021422.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313021422.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;h2 id="https-访问失败">https 访问失败
&lt;/h2>&lt;p>如果添加 5 条记录，https 访问会不正常，需要域名添加 txt 记录进行认证，边缘证书认证成功截图&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313021641.webp"
data-webp="/00-assets/Pasted%20image%2020250313021641.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313021641.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313021641.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313021641.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>如果是“txt 待认证”需要在域名管理后台添加 txt 记录进行认证，根据实际情况填写&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313021813.webp"
data-webp="/00-assets/Pasted%20image%2020250313021813.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313021813.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313021813.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313021813.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>也可以在 cloudflare 进行添加 txt 记录&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313021927.webp"
data-webp="/00-assets/Pasted%20image%2020250313021927.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313021927.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313021927.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313021927.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>txt 认证成功，删除即可，没什么鸟用，一般都是自动化认证的，呵呵。通过工具（如 &lt;code>acme.sh&lt;/code> 或 &lt;code>Certbot&lt;/code>）集成 Cloudflare 的 DNS API，自动完成 TXT 记录的添加和删除。&lt;/p>
&lt;h2 id="重定向的次数过多解决方案">「重定向的次数过多」解决方案
&lt;/h2>&lt;p>如果浏览器出现「重定向的次数过多」，需要额外配置 ssl 加密模型&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313022409.webp"
data-webp="/00-assets/Pasted%20image%2020250313022409.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313022409.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313022409.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313022409.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>选择任意两个都可以&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313022432.webp"
data-webp="/00-assets/Pasted%20image%2020250313022432.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313022432.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313022432.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313022432.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;h2 id="验证成功">验证成功
&lt;/h2>&lt;p>域名命令，出现 cf 特殊字段即可表示 cdn 开启成功，我这里给 github pages 套了 cdn&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cmd" data-lang="cmd">&lt;span class="line">&lt;span class="cl">curl -I https://www.carlos.ip-ddns.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313022602.webp"
data-webp="/00-assets/Pasted%20image%2020250313022602.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313022602.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313022602.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313022602.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>或者 ping 自己的主机名，没有出现 github ip 地址表示开启 cdn 成功&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-txt" data-lang="txt">&lt;span class="line">&lt;span class="cl">ping www.carlos.ip-ddns.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313022806.webp"
data-webp="/00-assets/Pasted%20image%2020250313022806.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313022806.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313022806.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250313022806.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p></description></item><item><title>hugo 部署到 cloudflare</title><link>https://www.carlos2016.cfd/p/hugo-%E9%83%A8%E7%BD%B2%E5%88%B0-cloudflare/</link><pubDate>Tue, 11 Mar 2025 21:12:53 +0800</pubDate><guid>https://www.carlos2016.cfd/p/hugo-%E9%83%A8%E7%BD%B2%E5%88%B0-cloudflare/</guid><description>&lt;img src="https://www.carlos2016.cfd/bg/52.webp" alt="Featured image of post hugo 部署到 cloudflare" />&lt;h2 id="前言">前言
&lt;/h2>&lt;p>本文主题是 hugo 如何部署到 cloudflare，访问效果在国内其实和 github pages 差不多，呵呵&lt;/p>
&lt;h2 id="实操">实操
&lt;/h2>&lt;p>选择 pages&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311210040.webp"
data-webp="/00-assets/Pasted%20image%2020250311210040.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311210040.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311210040.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311210040.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>选择仓库&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311061153.webp"
data-webp="/00-assets/Pasted%20image%2020250311061153.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311061153.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311061153.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311061153.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>根据自己实际情况填写，构建命令&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">hugo --gc --minify --environment production
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311210217.webp"
data-webp="/00-assets/Pasted%20image%2020250311210217.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311210217.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311210217.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311210217.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>我这里因为 github page 已经部署过了，所以再单独创建一份配置用来区分&lt;/p>
&lt;p>在 &lt;code>/root/hugo/config/production&lt;/code> 创建 &lt;code>hugo.yaml&lt;/code> 文件，然后上传到 github，通过 &lt;code>--environment production&lt;/code> 参数用来指定配置文件&lt;/p>
&lt;p>通过 &lt;code>HUGO_VERSION&lt;/code> 指定 hugo 版本，我这里选择 &lt;code>0.125.7&lt;/code> 版本&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311210743.webp"
data-webp="/00-assets/Pasted%20image%2020250311210743.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311210743.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311210743.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311210743.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>点击“保存并部署”即可将 github 的 hugo 源文件克隆到 cloudflare，cloudflare 就会自动生成 hugo 静态文件并发布&lt;/p>
&lt;h2 id="删除项目">删除项目
&lt;/h2>&lt;p>点击设置，划到最底部，点击删除即可。&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311061506.webp"
data-webp="/00-assets/Pasted%20image%2020250311061506.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311061506.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311061506.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311061506.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;h2 id="补充说明">补充说明
&lt;/h2>&lt;p>如果样式错误，可以通过参数 &lt;code>--baseURL &amp;quot;https://custom-url.com/&amp;quot;&lt;/code> 强制指定域名完整命令&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">hugo --baseURL &lt;span class="s2">&amp;#34;https://custom-url.com/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>github 修改默认分支</title><link>https://www.carlos2016.cfd/p/github-%E4%BF%AE%E6%94%B9%E9%BB%98%E8%AE%A4%E5%88%86%E6%94%AF/</link><pubDate>Tue, 11 Mar 2025 05:36:53 +0800</pubDate><guid>https://www.carlos2016.cfd/p/github-%E4%BF%AE%E6%94%B9%E9%BB%98%E8%AE%A4%E5%88%86%E6%94%AF/</guid><description>&lt;img src="https://www.carlos2016.cfd/bg/53.webp" alt="Featured image of post github 修改默认分支" />&lt;h2 id="前言">前言
&lt;/h2>&lt;p>本文主要主题是通过 github 页面，修改默认分支。&lt;/p>
&lt;h2 id="操作">操作
&lt;/h2>&lt;p>找到 Settings&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311053457.webp"
data-webp="/00-assets/Pasted%20image%2020250311053457.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311053457.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311053457.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311053457.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>点击该图标，就能切换分支&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311053541.webp"
data-webp="/00-assets/Pasted%20image%2020250311053541.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311053541.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311053541.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311053541.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>修改成功截图&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311053628.webp"
data-webp="/00-assets/Pasted%20image%2020250311053628.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311053628.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311053628.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311053628.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p></description></item><item><title>hugo 配合 github action 自动化部署</title><link>https://www.carlos2016.cfd/p/hugo-%E9%85%8D%E5%90%88-github-action-%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2/</link><pubDate>Tue, 11 Mar 2025 05:07:03 +0800</pubDate><guid>https://www.carlos2016.cfd/p/hugo-%E9%85%8D%E5%90%88-github-action-%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2/</guid><description>&lt;img src="https://www.carlos2016.cfd/bg/03.webp" alt="Featured image of post hugo 配合 github action 自动化部署" />&lt;h2 id="前言">前言
&lt;/h2>&lt;p>hugo 配合 github action 实现自动化部署，例如将 hugo 源码推送到 github 仓库，通过 github 服务器的 hugo 服务生成静态文件，最后自动发布到 main 分支。&lt;/p>
&lt;h2 id="实操">实操
&lt;/h2>&lt;p>github 创建 source 分支用来存放源码，然后在本地 git 仓库新建 &lt;code>.github/workflows&lt;/code> 目录，文件名不能改变，这是 github action 默认识别路径。&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311045254.webp"
data-webp="/00-assets/Pasted%20image%2020250311045254.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311045254.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311045254.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311045254.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>在该目录下创建 &lt;code>任意名称.yaml&lt;/code>，内容如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Deploy Hugo to GitHub Pages&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">push&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">branches&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">source ] &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># 仅监控source分支的推送&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">jobs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">deploy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">runs-on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ubuntu-latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">steps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">监测 source 分支&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">actions/checkout@v4&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ref&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">source &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># 明确检出source分支&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">hugo 设置&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">peaceiris/actions-hugo@v2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">hugo-version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;0.125.7&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># 指定Hugo版本&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">extended&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># 启用扩展版&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">删除符号链接&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rm -f /home/runner/work/hugo/hugo/static/_resources&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">复制图片&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cp -r //home/runner/work/hugo/hugo/static/00-assets/ /home/runner/work/hugo/hugo/static/_resources&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">hugo 生成静态文件&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">hugo --minify --gc&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">发布到 main 分支 &lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">peaceiris/actions-gh-pages@v4&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">deploy_key&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ secrets.SSH_PRIVATE_KEY }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">publish_dir&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">./public &lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">publish_branch&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">main &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># 正确参数名称&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">force_orphan&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># 强制覆盖目标分支&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">env&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 配置 Git 用户信息 &lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">GIT_USER_NAME&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;root&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">GIT_USER_EMAIL&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;root@localhost&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>runs-on 指定环境，可以指定 windows、ubuntu 以及 macos&lt;/li>
&lt;li>on 为事件，自动执行脚本的事件，这里为 push 自动触发脚本&lt;/li>
&lt;li>name 为注释&lt;/li>
&lt;li>uses 为使用模块，这里加载了 &lt;code>actions/checkout@v4&lt;/code>、&lt;code>peaceiris/actions-hugo@v2&lt;/code> 等待模块&lt;/li>
&lt;li>run 为执行命令，这里为 ubuntu 环境，所以都是 ubuntu 命令&lt;/li>
&lt;li>&lt;code>${{ secrets.SSH_PRIVATE_KEY }}&lt;/code> 为变量名，我是通过 ssh 方式推送到 main 分支，用到 &lt;code>peaceiris/actions-gh-pages@v4&lt;/code> 模块，其他为官方默认配置，不必理会&lt;/li>
&lt;/ul>
&lt;p>将本地 git 公钥和私钥配置到 github，我这里默认已经配置好公钥，只需要将私钥配置到 action 即可&lt;/p>
&lt;p>要想 github action 识别 &lt;code>${{ secrets.SSH_PRIVATE_KEY }}&lt;/code> 变量，需要手动配置，找到 Settings&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311050114.webp"
data-webp="/00-assets/Pasted%20image%2020250311050114.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311050114.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311050114.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311050114.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>注意变量名要一致，我这里为 &lt;code>SSH_PRIVATE_KEY&lt;/code>，用的时候是 &lt;code>${{ secrets.SSH_PRIVATE_KEY }}&lt;/code>&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311050215.webp"
data-webp="/00-assets/Pasted%20image%2020250311050215.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311050215.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311050215.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311050215.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>将 git 仓库推送到 github source 分支即可自动构建，点击进去，即可排查错误&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311050623.webp"
data-webp="/00-assets/Pasted%20image%2020250311050623.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311050623.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311050623.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311050623.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p></description></item><item><title>github 创建新分支</title><link>https://www.carlos2016.cfd/p/github-%E5%88%9B%E5%BB%BA%E6%96%B0%E5%88%86%E6%94%AF/</link><pubDate>Tue, 11 Mar 2025 02:35:32 +0800</pubDate><guid>https://www.carlos2016.cfd/p/github-%E5%88%9B%E5%BB%BA%E6%96%B0%E5%88%86%E6%94%AF/</guid><description>&lt;img src="https://www.carlos2016.cfd/bg/32.webp" alt="Featured image of post github 创建新分支" />&lt;h2 id="前言">前言
&lt;/h2>&lt;p>github 页面怎么创建新分支？有两种办法，一是通过网页创建，二是通过本地 git 命令创建，然后推送到远程仓库。本文主要通过网页图形化界面创建。&lt;/p>
&lt;h2 id="实操">实操
&lt;/h2>&lt;p>找到 Branch&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311022446.webp"
data-webp="/00-assets/Pasted%20image%2020250311022446.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311022446.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311022446.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311022446.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>点击 New branch 按钮&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311022535.webp"
data-webp="/00-assets/Pasted%20image%2020250311022535.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311022535.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311022535.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311022535.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;h2 id="your-branches-和-active-branches">Your branches‌ 和 ‌Active branches
&lt;/h2>&lt;p>GitHub 界面中显示的 ‌Your branches‌ 和 ‌Active branches‌ 是两种不同的分支分类方式&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311023329.webp"
data-webp="/00-assets/Pasted%20image%2020250311023329.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311023329.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311023329.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311023329.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>Your branches‌ 是当前用户（即你）在仓库中创建的所有分支，包括本地推送或直接在 GitHub 网页创建的分支‌。&lt;/p>
&lt;p>Active branches 仓库中所有活跃的分支（包括 main、dev 等主分支及近期有更新的分支），无论创建者是谁‌。&lt;/p></description></item><item><title>hugo 部署到 github pages 部分文章 404</title><link>https://www.carlos2016.cfd/p/hugo-%E9%83%A8%E7%BD%B2%E5%88%B0-github-pages-%E9%83%A8%E5%88%86%E6%96%87%E7%AB%A0-404/</link><pubDate>Tue, 11 Mar 2025 00:33:02 +0800</pubDate><guid>https://www.carlos2016.cfd/p/hugo-%E9%83%A8%E7%BD%B2%E5%88%B0-github-pages-%E9%83%A8%E5%88%86%E6%96%87%E7%AB%A0-404/</guid><description>&lt;img src="https://www.carlos2016.cfd/bg/02.webp" alt="Featured image of post hugo 部署到 github pages 部分文章 404" />&lt;h2 id="前言">前言
&lt;/h2>&lt;p>我的部分文章是 joplin 导出，而静态资源是存放在 &lt;code>_resources&lt;/code> 目录。GitHub Pages 默认启用 Jekyll 引擎，会忽略以下划线 &lt;code>_&lt;/code> 开头的目录（如 &lt;code>_resources&lt;/code>）‌。&lt;/p>
&lt;h2 id="解决方案">解决方案
&lt;/h2>&lt;p>&lt;strong>禁用 Jekyll 处理&lt;/strong>&lt;/p>
&lt;p>在项目根目录或发布分支（如 &lt;code>gh-pages&lt;/code>）中添加空文件 &lt;code>.nojekyll&lt;/code>，以阻止 Jekyll 过滤特殊命名目录‌。&lt;/p>
&lt;p>在 hugo public 目录运行命令&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">touch .nojekyll
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>确保 &lt;code>.nojekyll&lt;/code> 文件被提交到 Git 仓库中。&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311003040.webp"
data-webp="/00-assets/Pasted%20image%2020250311003040.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311003040.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311003040.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311003040.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>访问成功，不会出现 404 错误。&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311003236.webp"
data-webp="/00-assets/Pasted%20image%2020250311003236.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311003236.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311003236.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250311003236.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p></description></item><item><title>hugo 部署到 github pages</title><link>https://www.carlos2016.cfd/p/hugo-%E9%83%A8%E7%BD%B2%E5%88%B0-github-pages/</link><pubDate>Mon, 10 Mar 2025 23:44:35 +0800</pubDate><guid>https://www.carlos2016.cfd/p/hugo-%E9%83%A8%E7%BD%B2%E5%88%B0-github-pages/</guid><description>&lt;img src="https://www.carlos2016.cfd/bg/35.webp" alt="Featured image of post hugo 部署到 github pages" />&lt;h2 id="前言">前言
&lt;/h2>&lt;p>本文主题是 hugo 怎么部署到 github pages&lt;/p>
&lt;h2 id="实操">实操
&lt;/h2>&lt;p>设置 baseurl，不然会样式错误。&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310233803.webp"
data-webp="/00-assets/Pasted%20image%2020250310233803.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310233803.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310233803.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310233803.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>将 public 目录下的静态文件上传到 github，找到 Settings&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310233913.webp"
data-webp="/00-assets/Pasted%20image%2020250310233913.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310233913.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310233913.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310233913.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>找到 pages，设置分支，设置根目录，保存即可。&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310234041.webp"
data-webp="/00-assets/Pasted%20image%2020250310234041.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310234041.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310234041.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310234041.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>如果 &lt;code>username.github.io&lt;/code> 作为仓库名，直接访问即可，我的是 hugo 作为仓库名，所以要在后面加 hugo 目录，完整 url：&lt;code>username.github.io/hugo&lt;/code>&lt;/p>
&lt;p>访问成功截图&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310234348.webp"
data-webp="/00-assets/Pasted%20image%2020250310234348.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310234348.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310234348.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310234348.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p></description></item><item><title>hugo 定时推送代码</title><link>https://www.carlos2016.cfd/p/hugo-%E5%AE%9A%E6%97%B6%E6%8E%A8%E9%80%81%E4%BB%A3%E7%A0%81/</link><pubDate>Mon, 10 Mar 2025 05:53:27 +0800</pubDate><guid>https://www.carlos2016.cfd/p/hugo-%E5%AE%9A%E6%97%B6%E6%8E%A8%E9%80%81%E4%BB%A3%E7%A0%81/</guid><description>&lt;img src="https://www.carlos2016.cfd/bg/27.webp" alt="Featured image of post hugo 定时推送代码" />&lt;h2 id="前言">前言
&lt;/h2>&lt;p>提前配置好 git 仓库，配置好 ssh，该脚本是在 ssh 配置完成下编写，不然要输入用户名和密码&lt;/p>
&lt;h2 id="实操">实操
&lt;/h2>&lt;p>新建 sh 文件，内容如下&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /root/hugo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hugo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /root/hugo/public
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git add .
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git commit -m &lt;span class="s2">&amp;#34;auto commit: &lt;/span>&lt;span class="k">$(&lt;/span>date +&lt;span class="s1">&amp;#39;%Y-%m-%d %H:%M:%S&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git push origin main
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo nohup sh /root/shell/hugo.sh start &lt;span class="p">&amp;amp;&lt;/span>&amp;gt;&amp;gt; /root/shell/shell.log &lt;span class="p">&amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>宝塔创建计划任务&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310054915.webp"
data-webp="/00-assets/Pasted%20image%2020250310054915.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310054915.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310054915.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310054915.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>宝塔定时执行脚本即可&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310055150.webp"
data-webp="/00-assets/Pasted%20image%2020250310055150.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310055150.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310055150.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310055150.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>可以手动执行，测试脚本&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310055256.webp"
data-webp="/00-assets/Pasted%20image%2020250310055256.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310055256.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310055256.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310055256.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p></description></item><item><title>github ssh 免密推送代码</title><link>https://www.carlos2016.cfd/p/github-ssh-%E5%85%8D%E5%AF%86%E6%8E%A8%E9%80%81%E4%BB%A3%E7%A0%81/</link><pubDate>Mon, 10 Mar 2025 05:08:44 +0800</pubDate><guid>https://www.carlos2016.cfd/p/github-ssh-%E5%85%8D%E5%AF%86%E6%8E%A8%E9%80%81%E4%BB%A3%E7%A0%81/</guid><description>&lt;img src="https://www.carlos2016.cfd/bg/44.webp" alt="Featured image of post github ssh 免密推送代码" />&lt;h2 id="前言">前言
&lt;/h2>&lt;p>如果使用 https 方式推送代码，每次推送代码都需要输入用户名和密码，不方便，也不利于创建脚本&lt;/p>
&lt;h2 id="生成-ssh-密钥对">生成 SSH 密钥对
&lt;/h2>&lt;p>&lt;strong>执行密钥生成命令&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ssh-keygen -t rsa -b &lt;span class="m">4096&lt;/span> -C &lt;span class="s2">&amp;#34;root@localhost&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这里的账户填写本地 git 账户，而非 github 账号&lt;/p>
&lt;p>默认回车 3 次&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310044611.webp"
data-webp="/00-assets/Pasted%20image%2020250310044611.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310044611.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310044611.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310044611.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>密钥生成后，id_rsa 为私钥（需保密），id_rsa.pub 为公钥（需上传）‌&lt;/p>
&lt;p>&lt;strong>查看公钥内容&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">cat ~/.ssh/id_rsa.pub
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="github-添加公钥">github 添加公钥
&lt;/h2>&lt;p>主页头像 -&amp;gt; &amp;ldquo;Settings&amp;rdquo;&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310044947.webp"
data-webp="/00-assets/Pasted%20image%2020250310044947.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310044947.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310044947.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310044947.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>找到 &amp;ldquo;New SSH key&amp;rdquo;&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310045237.webp"
data-webp="/00-assets/Pasted%20image%2020250310045237.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310045237.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310045237.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310045237.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>输入 github 账户密码&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310045511.webp"
data-webp="/00-assets/Pasted%20image%2020250310045511.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310045511.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310045511.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310045511.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;h2 id="配置-git-使用-ssh-协议">配置 git 使用 ssh 协议
&lt;/h2>&lt;p>查看当前远程仓库协议&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git remote -v
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310050519.webp"
data-webp="/00-assets/Pasted%20image%2020250310050519.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310050519.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310050519.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310050519.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>若为 https 协议，需改为 ssh 格式&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git remote set-url origin git@github.com:zero3737/hugo.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>仓库改为自己的&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310051040.webp"
data-webp="/00-assets/Pasted%20image%2020250310051040.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310051040.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310051040.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310051040.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;h2 id="测试-ssh-连接">测试 ssh 连接
&lt;/h2>&lt;p>验证密钥配置是否成功&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ssh -T git@github.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="推送代码">推送代码
&lt;/h2>&lt;p>出现 &lt;code>Are you sure you want to continue connecting (yes/no/[fingerprint])?&lt;/code> 输入 yes 即可，此提示是 SSH 客户端的安全验证机制，在首次连接到某台服务器时触发。&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310051908.webp"
data-webp="/00-assets/Pasted%20image%2020250310051908.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310051908.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310051908.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310051908.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p></description></item><item><title>github 新建仓库以及推送代码</title><link>https://www.carlos2016.cfd/p/github-%E6%96%B0%E5%BB%BA%E4%BB%93%E5%BA%93%E4%BB%A5%E5%8F%8A%E6%8E%A8%E9%80%81%E4%BB%A3%E7%A0%81/</link><pubDate>Mon, 10 Mar 2025 03:59:47 +0800</pubDate><guid>https://www.carlos2016.cfd/p/github-%E6%96%B0%E5%BB%BA%E4%BB%93%E5%BA%93%E4%BB%A5%E5%8F%8A%E6%8E%A8%E9%80%81%E4%BB%A3%E7%A0%81/</guid><description>&lt;img src="https://www.carlos2016.cfd/bg/47.webp" alt="Featured image of post github 新建仓库以及推送代码" />&lt;h2 id="github-新建仓库">github 新建仓库
&lt;/h2>&lt;p>github 仓库主页选择 new&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310033650.webp"
data-webp="/00-assets/Pasted%20image%2020250310033650.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310033650.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310033650.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310033650.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>输入仓库名，‌然后选择公开（Public）或私有（Private）权限‌。&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310033741.webp"
data-webp="/00-assets/Pasted%20image%2020250310033741.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310033741.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310033741.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310033741.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>划到底部，点击 “Create repository” 即可新建完毕&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310033845.webp"
data-webp="/00-assets/Pasted%20image%2020250310033845.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310033845.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310033845.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310033845.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;h2 id="ubuntu-安装-git">ubuntu 安装 git
&lt;/h2>&lt;p>ubuntu 默认安装 git，呵呵，没有安装执行以下命令&lt;/p>
&lt;p>一、更新系统软件包列表&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo apt update
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>二、执行安装命令&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo apt install git -y
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>三、验证安装结果&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git --version
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="初始化-git">初始化 git
&lt;/h2>&lt;p>配置 git 用户名和邮箱&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git config --global user.name &lt;span class="s2">&amp;#34;root&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git config --global user.email &lt;span class="s2">&amp;#34;root@localhost&amp;#34;&lt;/span>‌
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>查看全局配置&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git config --global user.name
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git config --global user.email
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>运行结果&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310035219.webp"
data-webp="/00-assets/Pasted%20image%2020250310035219.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310035219.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310035219.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310035219.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>&lt;strong>补充说明&lt;/strong>&lt;/p>
&lt;p>Git 全局配置中的用户名和邮箱均可完全自定义（如 &lt;code>root&lt;/code> 和 &lt;code>root@localhost&lt;/code>）。这两个命令设置的名字和邮箱会出现在每次提交记录中，而用户名的自定义是允许的，只要符合一定的规范。&lt;/p>
&lt;p>在团队项目中，建议使用真实姓名或可识别昵称，便于追溯提交记录‌。&lt;/p>
&lt;h2 id="关联本地与远程仓库">关联本地与远程仓库
&lt;/h2>&lt;p>本地初始化仓库并关联远程地址&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git init
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git remote add origin git@github.com:YourName/RepoName.git‌
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="上传代码">上传代码
&lt;/h2>&lt;p>手动提交命令，提交到本地 git&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git add . &lt;span class="c1"># 添加所有文件到暂存区&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git commit -m &lt;span class="s2">&amp;#34;提交说明&amp;#34;&lt;/span>‌
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>重命名当前分支为 main‌&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git branch -M main
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>补充说明&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>若通过 &lt;code>git init&lt;/code> 初始化仓库后需将默认分支从 &lt;code>master&lt;/code> 改为 &lt;code>main&lt;/code>，执行一次 &lt;code>git branch -M main&lt;/code> 即可永久生效‌。&lt;/li>
&lt;li>强制重命名当前本地分支‌（例如将默认分支从 master 改为 main），与 GitHub 仓库名无关‌。这是 git 本地命令。&lt;/li>
&lt;/ul>
&lt;p>推送到 github 仓库&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git push -u origin main
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>补充说明&lt;/strong>：&lt;/p>
&lt;ul>
&lt;li>会将当前本地分支‌推送到远程仓库的 source 分支，并建立追踪关系（-u 参数的作用）‌。若远程 source 分支不存在，此命令会自动创建该分支‌。&lt;/li>
&lt;li>本地分支名与远程分支名 ‌无需相同‌。例如，本地分支为 main，仍可推送至远程 source 分支‌。&lt;/li>
&lt;li>后续使用 git push（不带参数）时，默认推送至已关联的远程分支（即 source）‌。&lt;/li>
&lt;/ul>
&lt;p>当本地分支名与远程分支名不一致时，‌需通过参数或配置明确指定映射关系‌，否则会因默认规则冲突导致推送失败‌。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git push -u origin 本地分支名:远程分支名
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果是一个人，遇到冲突，不想处理，可以强制推送&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">git push -f origin main
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>可执行脚本定时提交&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="nb">cd&lt;/span> /path/to/your/repo &lt;span class="c1"># 切换到项目目录‌&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git add . &lt;span class="c1"># 添加所有修改到暂存区‌&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git commit -m &lt;span class="s2">&amp;#34;Auto commit: &lt;/span>&lt;span class="k">$(&lt;/span>date +&lt;span class="s1">&amp;#39;%Y-%m-%d %H:%M:%S&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="c1"># 自动生成带时间的提交说明‌&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git push origin main &lt;span class="c1"># 推送代码到远程仓库‌&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>输入 github 账户名以及密码，不是 git 的用户名和密码&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310043619.webp"
data-webp="/00-assets/Pasted%20image%2020250310043619.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310043619.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310043619.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250310043619.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p></description></item><item><title>gitee 导入 github 项目</title><link>https://www.carlos2016.cfd/p/gitee-%E5%AF%BC%E5%85%A5-github-%E9%A1%B9%E7%9B%AE/</link><pubDate>Mon, 10 Mar 2025 02:27:12 +0800</pubDate><guid>https://www.carlos2016.cfd/p/gitee-%E5%AF%BC%E5%85%A5-github-%E9%A1%B9%E7%9B%AE/</guid><description>&lt;img src="https://www.carlos2016.cfd/bg/12.webp" alt="Featured image of post gitee 导入 github 项目" />&lt;h2 id="从-github-导入项目到码云">从 github 导入项目到码云
&lt;/h2>&lt;p>码云支持 github 导入项目&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/_resources/1-5.png"
data-webp="/_resources/1-5.webp"
data-original="https://www.carlos2016.cfd/_resources/1-5.png"
class="webp-fancybox">
&lt;picture>
&lt;img src="https://www.carlos2016.cfd/_resources/1-5.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;h2 id="自动同步-github-项目">自动同步 github 项目
&lt;/h2>&lt;p>仓库 -&amp;gt; 管理 -&amp;gt; 基本设置&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/_resources/2-3.png"
data-webp="/_resources/2-3.webp"
data-original="https://www.carlos2016.cfd/_resources/2-3.png"
class="webp-fancybox">
&lt;picture>
&lt;img src="https://www.carlos2016.cfd/_resources/2-3.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p></description></item><item><title>github 使用教程</title><link>https://www.carlos2016.cfd/p/github-%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/</link><pubDate>Mon, 10 Mar 2025 02:24:20 +0800</pubDate><guid>https://www.carlos2016.cfd/p/github-%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/</guid><description>&lt;img src="https://www.carlos2016.cfd/bg/20.webp" alt="Featured image of post github 使用教程" />&lt;h2 id="ssh-配置">ssh 配置
&lt;/h2>&lt;p>如果使用 SSH 方式推送代码，需要配置 SSH Key。&lt;/p>
&lt;p>把邮件地址换成自己的邮件地址，该命令意思是生成 SSH Key。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ssh-keygen -t rsa -C &amp;#34;youremail@example.com&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>运行命令一路回车，使用默认值即可。如果运行顺利，会在用户主目录生成 .ssh 目录，里面有 id_rsa （私钥）和 id_rsa.pub （公钥）两个文件。&lt;/p>
&lt;p>进入用户主目录：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">cd ~
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>然后登录 github 账号找到 SSH Keys 选项，添加 SSH Key，Key 内容为 id_rsa.pub （公钥）内容。&lt;/p>
&lt;p>GitHub 允许你添加多个 Key。假定你有若干电脑，只要把每台电脑的 Key 都添加到 GitHub，就可以在每台电脑上往 GitHub 推送了。&lt;/p>
&lt;p>在 GitHub 上免费托管的 Git 仓库，任何人都可以看到（但只有你自己才能改）。&lt;/p>
&lt;p>验证 SSH 配置是否成功：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ssh -T git@github.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="watchstar-和-fork-的区别">watch、star 和 fork 的区别
&lt;/h2>&lt;p>watch:&lt;/p>
&lt;p>对于别人的项目，默认自己都处于 Not watching 的状态；当你选择 Watching，表示你以后会关注这个项目的所有动态。这个项目以后只要发生变动，如被别人提交了 push request、被别人发起了 issue 等等情况，你都会在自己的个人通知中心，收到一条通知消息。如果你设置了个人邮箱，那么你的邮箱也可能收到相应的邮件。&lt;/p>
&lt;p>star:&lt;/p>
&lt;p>类似关注或者点赞，当你点击 star，表示你喜欢这个项目，和对这个项目的支持。&lt;/p>
&lt;p>fork:&lt;/p>
&lt;p>点击 fork，相当于你自己有了一份原项目的拷贝，当然这个拷贝只是针对当时的项目文件；如果后续原项目文件发生改变，你必须通过其他的方式去同步。&lt;/p>
&lt;h2 id="添加协作者push权限">添加协作者（push权限）
&lt;/h2>&lt;p>设置选项，找到协作者（Collaborators）选项，添加用户。&lt;/p>
&lt;h2 id="github-pages-预览-html">GitHub Pages 预览 HTML
&lt;/h2>&lt;p>你的仓库 -&amp;gt; Settings -&amp;gt; Options -&amp;gt; GitHub Pages&lt;/p>
&lt;p>Source 中选择 master branch。&lt;/p>
&lt;p>找到 GitHub Pages 中的地址，如下图所示：&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/_resources/1.webp"
data-webp="/_resources/1.webp"
data-original="https://www.carlos2016.cfd/_resources/1.jpg"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/_resources/1.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/_resources/1.jpg"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>在上面的地址基础上加上你的相对与仓库的文件路径。&lt;/p>
&lt;p>&lt;strong>GitHub Pages 自定义域名&lt;/strong>&lt;/p>
&lt;p>仓库 -&amp;gt; Settings&lt;/p>
&lt;p>箭头处填写对应域名即可（允许该域名进行CNAME访问）。&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/_resources/3-4.png"
data-webp="/_resources/3-4.webp"
data-original="https://www.carlos2016.cfd/_resources/3-4.png"
class="webp-fancybox">
&lt;picture>
&lt;img src="https://www.carlos2016.cfd/_resources/3-4.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>等待域名生效，一般为 10 分钟。&lt;/p>
&lt;p>补充：DNS 服务器中将记录类型配置成 CNAME（别名记录），记录值填写 GitHub Pages 分配的域名。&lt;/p>
&lt;h2 id="github-发布二进制文件让其他人下载">Github 发布二进制文件让其他人下载
&lt;/h2>&lt;p>仓库主页 -&amp;gt; release&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/_resources/2.jpg"
data-webp="/_resources/2.webp"
data-original="https://www.carlos2016.cfd/_resources/2.jpg"
class="webp-fancybox">
&lt;picture>
&lt;img src="https://www.carlos2016.cfd/_resources/2.jpg"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>点击下图箭头所指按钮。&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/_resources/3.jpg"
data-webp="/_resources/3.webp"
data-original="https://www.carlos2016.cfd/_resources/3.jpg"
class="webp-fancybox">
&lt;picture>
&lt;img src="https://www.carlos2016.cfd/_resources/3.jpg"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>根据下图提示输入相应内容即可。&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/_resources/4.jpg"
data-webp="/_resources/4.webp"
data-original="https://www.carlos2016.cfd/_resources/4.jpg"
class="webp-fancybox">
&lt;picture>
&lt;img src="https://www.carlos2016.cfd/_resources/4.jpg"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>分布完成别人即可下载你的发布内容。&lt;/p>
&lt;h2 id="github-搜索指令">Github 搜索指令
&lt;/h2>&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">命令&lt;/th>
&lt;th style="text-align:left">作用&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">stars:&amp;gt;=500&lt;/td>
&lt;td style="text-align:left">搜索 star 大于等于 500 的项目。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">stars:&amp;gt;=500 language:java&lt;/td>
&lt;td style="text-align:left">搜索 star 大于等于 500 的项目且为 JAVA 语言的项目。&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>git 入门使用 2</title><link>https://www.carlos2016.cfd/p/git-%E5%85%A5%E9%97%A8%E4%BD%BF%E7%94%A8-2/</link><pubDate>Mon, 10 Mar 2025 02:20:13 +0800</pubDate><guid>https://www.carlos2016.cfd/p/git-%E5%85%A5%E9%97%A8%E4%BD%BF%E7%94%A8-2/</guid><description>&lt;img src="https://www.carlos2016.cfd/bg/13.webp" alt="Featured image of post git 入门使用 2" />&lt;h2 id="放弃本地修改并强制拉取更新">放弃本地修改并强制拉取更新
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">git fetch --all
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git reset --hard origin/master
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>git fetch&lt;/code> 指令是下载远程仓库最新内容，不做合并。&lt;/p>
&lt;p>&lt;code>git reset&lt;/code> 指令把HEAD指向master最新版本。&lt;/p>
&lt;h2 id="git-忽略特殊文件">git 忽略特殊文件
&lt;/h2>&lt;p>在 Git 工作区的根目录下创建一个特殊的 .gitignore 文件。忽略指定文件：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">test.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">index.html
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果要忽略某一类文件，内容如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">*.class
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">*.html
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="git-ssh-远程连接服务器">git ssh 远程连接服务器
&lt;/h2>&lt;p>git bash 输入 &lt;code>ssh root@192.168.1.102&lt;/code> 命令，接着输入密码即可连接远程服务器。&lt;/p>
&lt;p>root 为用户名，@ 符号紧跟 IP 地址。&lt;/p>
&lt;p>&lt;strong>退出连接&lt;/strong>：&lt;code>Ctrl + D&lt;/code> 退出连接&lt;/p>
&lt;h2 id="git-服务器搭建">git 服务器搭建
&lt;/h2>&lt;p>&lt;strong>本地 git 服务器搭建方案&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://gogs.io/" target="_blank" rel="noopener"
>Gogs&lt;/a>
&lt;/li>
&lt;li>&lt;a class="link" href="https://about.gitlab.com/" target="_blank" rel="noopener"
>GitLab&lt;/a>
&lt;/li>
&lt;/ul></description></item><item><title>git 入门使用</title><link>https://www.carlos2016.cfd/p/git-%E5%85%A5%E9%97%A8%E4%BD%BF%E7%94%A8/</link><pubDate>Mon, 10 Mar 2025 02:09:10 +0800</pubDate><guid>https://www.carlos2016.cfd/p/git-%E5%85%A5%E9%97%A8%E4%BD%BF%E7%94%A8/</guid><description>&lt;img src="https://www.carlos2016.cfd/bg/10.webp" alt="Featured image of post git 入门使用" />&lt;h2 id="概念">概念
&lt;/h2>&lt;p>所有的版本控制系统，其实只能跟踪文本文件的改动，比如 TXT 文件、网页、所有的程序代码等等。而图片、视频这些二进制文件，虽然也能由版本控制系统管理，但没法跟踪文件的变化，只能把二进制文件每次改动串起来，也就是只知道图片从 100KB 改成了 120KB。Microsoft 的 Word 格式是二进制格式，因此，版本控制系统是没法跟踪 Word 文件的改动的。&lt;/p>
&lt;p>工作区：就是你在电脑里能看到的目录。&lt;/p>
&lt;p>版本库：工作区有一个隐藏目录 .git，这个不算工作区，而是 Git 的版本库。版本库里存了很多东西，其中最重要的就是称为 stage（或者叫 index）的暂存区。&lt;/p>
&lt;p>还有 Git 为我们自动创建的第一个分支 master，以及指向 master 的一个指针叫 HEAD。&lt;/p>
&lt;h2 id="配置姓名和邮箱">配置姓名和邮箱
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">git config --global user.name &amp;#34;Your Name&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git config --global user.email &amp;#34;email@example.com&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>--global&lt;/code> 参数表示这台机器上所有的 Git 仓库都会使用这个配置。当然也可以对某个仓库指定不同的用户名和 Email 地址。&lt;/p>
&lt;h2 id="本地仓库">本地仓库
&lt;/h2>&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">命令&lt;/th>
&lt;th style="text-align:left">说明&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">git init&lt;/td>
&lt;td style="text-align:left">在当前目录下会自动生成 .git 隐藏文件夹，该隐藏文件夹就是 git 版本库。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>git add &amp;lt;file&amp;gt;&lt;/code>&lt;/td>
&lt;td style="text-align:left">将文件添加到暂存区（将目标文件加入跟踪列表）。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>git add -A&lt;/code>&lt;/td>
&lt;td style="text-align:left">将所有文件添加到存储区。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>git add -f App.class&lt;/code>&lt;/td>
&lt;td style="text-align:left">强制添加。被 git 忽略的文件也可以强制添加。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>git commit –m &amp;quot;message&amp;quot;&lt;/code>&lt;/td>
&lt;td style="text-align:left">将暂存区文件提交到版本库。&lt;code>-m&lt;/code> 参数为提交说明。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">git status&lt;/td>
&lt;td style="text-align:left">显示工作目录和暂存区的状态。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>git log --pretty=oneline&lt;/code>&lt;/td>
&lt;td style="text-align:left">显示提交日志。&lt;code>--pretty=oneline&lt;/code> 只显示 commit id 和描述。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">git reflog&lt;/td>
&lt;td style="text-align:left">查看命令历史。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>git diff &amp;lt;file&amp;gt;&lt;/code>&lt;/td>
&lt;td style="text-align:left">比较当前文件和暂存区文件差异。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>git diff HEAD [&amp;lt;path&amp;gt;...]&lt;/code>&lt;/td>
&lt;td style="text-align:left">比较工作区与最新本地版本库。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>git reset --hard HEAD^&lt;/code>&lt;/td>
&lt;td style="text-align:left">将当前 HEAD 复位到指定状态。HEAD 表示当前版本，&lt;code>HEAD^&lt;/code> 表示上一个版本，&lt;code>HEAD^^&lt;/code> 表示上上一个版本，&lt;code>HEAD~100&lt;/code> 表示前 100 个版本。&lt;br/>Git 的版本回退速度非常快，因为 Git 在内部有个指向当前版本的 HEAD 指针。当你回退版本的时候，Git 仅仅是改变 HEAD 指向。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>git reset HEAD &amp;lt;file&amp;gt;&lt;/code>&lt;/td>
&lt;td style="text-align:left">把暂存区的修改撤销掉，重新放回工作区。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>git checkout --file&lt;/code>&lt;/td>
&lt;td style="text-align:left">文件在工作区的修改全部撤销。文件没有被放到暂存区，撤销修改就回到和版本库一模一样的状态；文件已经添加到暂存区后，撤销修改就回到添加到暂存区后的状态。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">git rm file&lt;/td>
&lt;td style="text-align:left">删除文件，同时还会将这个删除操作记录放到缓存区。&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="分支管理">分支管理
&lt;/h2>&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">命令&lt;/th>
&lt;th style="text-align:left">说明&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">git checkout master&lt;/td>
&lt;td style="text-align:left">切换分支。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">git branch&lt;/td>
&lt;td style="text-align:left">查看当前有哪些分支。当前分支前面有个星号。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">git branch dev&lt;/td>
&lt;td style="text-align:left">创建分支 dev。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">git branch -d dev&lt;/td>
&lt;td style="text-align:left">删除 dev 分支。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">git branch -D dev&lt;/td>
&lt;td style="text-align:left">强制删除 dev 分支。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">git branch dev origin/dev&lt;/td>
&lt;td style="text-align:left">创建远程 origin 的 dev 分支到本地。默认克隆只有master分支。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">git checkout -b dev&lt;/td>
&lt;td style="text-align:left">创建并切换到 dev 分支。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">git merge dev&lt;/td>
&lt;td style="text-align:left">将当前分支合并到 dev 分支。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>git merge --no-ff -m &amp;quot;merge with no-ff&amp;quot; dev&lt;/code>&lt;/td>
&lt;td style="text-align:left">将当前分支合并到 dev 分支。&lt;code>--no-ff&lt;/code> 参数，表示禁用快速模式。&lt;br/>普通模式：当前分支合并时会提交到版本库，不是简单的变更指针指向。&lt;br/>快速模式：把当前分支指向指定分支。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">git log –graph&lt;/td>
&lt;td style="text-align:left">查看分支合并图。&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>分支策略&lt;/strong>&lt;/p>
&lt;p>master 分支称为主分支，HEAD 表示指向当前分支。&lt;/p>
&lt;p>master 分支应该是非常稳定的，dev 分支是不稳定的。1.0 版本发布时，再把 dev 分支合并到 master 上，在 master 分支发布 1.0 版本。每个人都在 dev 分支上干活，每个人都有自己的分支，时不时地往 dev 分支上合并。&lt;/p>
&lt;p>在 master 分支修复 bug，必须新建 bug 分支，修复完切换到 master 分支合并 bug 分支。&lt;/p>
&lt;p>在 dev 分支上开发新功能，新建 Feature 分支，新功能开发完毕切换到 dev 分支合并，如果不想合并必须强制删除。&lt;/p>
&lt;p>总结：&lt;/p>
&lt;ul>
&lt;li>master 分支是主分支，因此要时刻与远程同步。&lt;/li>
&lt;li>dev 分支是开发分支，团队所有成员都需要在上面工作，所以也需要与远程同步。&lt;/li>
&lt;li>bug 分支只用于在本地修复 bug，就没必要推到远程了，除非老板要看看你每周到底修复了几个 bug。&lt;/li>
&lt;li>feature 分支是否推到远程，取决于你是否和你的小伙伴合作在上面开发。&lt;/li>
&lt;/ul>
&lt;h2 id="status">status
&lt;/h2>&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">命令&lt;/th>
&lt;th style="text-align:left">说明&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">git stash&lt;/td>
&lt;td style="text-align:left">会把所有未提交的修改（包括暂存的和非暂存的）都保存起来。便于切换其他分支，修改其它分支的代码。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">git stash list&lt;/td>
&lt;td style="text-align:left">列出通过 stash 储藏的修改。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">git stash apply stash@{0}&lt;/td>
&lt;td style="text-align:left">恢复 stash@{0}。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">git stash drop stash@{0}&lt;/td>
&lt;td style="text-align:left">删除 stash@{0}。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">git stash pop&lt;/td>
&lt;td style="text-align:left">恢复的同时把stash内容删除。&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="标签管理">标签管理
&lt;/h2>&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">命令&lt;/th>
&lt;th style="text-align:left">说明&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">&lt;code>git tag &amp;lt;name&amp;gt;&lt;/code>&lt;/td>
&lt;td style="text-align:left">给最近的 commit 打上标签。tag 就是一个让人容易记住的有意义的名字，它跟某个 commit 绑在一起。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">git tag v0.9 f52c633&lt;/td>
&lt;td style="text-align:left">给指定 commit id 打上标签。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">git tag&lt;/td>
&lt;td style="text-align:left">显示所有标签。&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="远程仓库">远程仓库
&lt;/h2>&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">命令&lt;/th>
&lt;th style="text-align:left">说明&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">&lt;code>git remote add [shortname] [url]&lt;/code>&lt;/td>
&lt;td style="text-align:left">添加远程仓库关联。shortname 只能对应一个 url。&lt;br/>注意：推送代码前必须先关联远程仓库。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">git remote&lt;/td>
&lt;td style="text-align:left">不带参数，列出已经存在的远程连接。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">git remote –v&lt;/td>
&lt;td style="text-align:left">列出远程连接，并显示对应 url。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>git remote remove &amp;lt;name&amp;gt;&lt;/code>&lt;/td>
&lt;td style="text-align:left">删除远程仓库。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>git push &amp;lt;远程主机名&amp;gt; &amp;lt;本地分支名&amp;gt;:&amp;lt;远程分支名&amp;gt;&lt;/code>&lt;/td>
&lt;td style="text-align:left">将本地分支的更新，推送到远程主机。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">git push origin master&lt;/td>
&lt;td style="text-align:left">将本地的 master 分支推送到 origin 主机的 master 分支。如果 master 不存在，则会被新建。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">git push -u origin master&lt;/td>
&lt;td style="text-align:left">-u 选项指定一个默认主机，这样后面就可以不加任何参数使用 git push。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">git push origin :master&lt;/td>
&lt;td style="text-align:left">删除指定的远程分支，因为这等同于推送一个空的本地分支到远程分支。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">git push &amp;ndash;all origin&lt;/td>
&lt;td style="text-align:left">推送所有分支。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">git push -f origin dev:master&lt;/td>
&lt;td style="text-align:left">强制推送。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>git clone &amp;lt;版本库的网址&amp;gt;&lt;/code>&lt;/td>
&lt;td style="text-align:left">本地主机生成一个目录，与远程主机的版本库同名。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>git clone &amp;lt;版本库的网址&amp;gt; &amp;lt;本地目录名&amp;gt;&lt;/code>&lt;/td>
&lt;td style="text-align:left">如果要指定不同的目录名，可以将目录名作为git clone命令的第二个参数。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>git pull &amp;lt;远程主机名&amp;gt; &amp;lt;远程分支名&amp;gt;:&amp;lt;本地分支名&amp;gt;&lt;/code>&lt;/td>
&lt;td style="text-align:left">拉取远程主机某个分支的更新，再与本地的指定分支合并。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>git fetch &amp;lt;远程主机名&amp;gt; &amp;lt;远程分支名&amp;gt;:&amp;lt;本地分支名&amp;gt;&lt;/code>&lt;/td>
&lt;td style="text-align:left">&lt;code>git fetch&lt;/code> 和 &lt;code>git pull&lt;/code> 类似，但不会自动合并当前分支。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>git branch --set-upstream debug origin/debug&lt;/code>&lt;/td>
&lt;td style="text-align:left">将本地 bug 分支与远程的 bug 分支关联。解决拉取时 git 提示 &lt;code>no tracking information&lt;/code> 的问题。&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>克隆和拉取&lt;/strong>&lt;/p>
&lt;p>clone 是本地没有 repository 时，将远程 repository 整个下载过来&lt;/p>
&lt;p>pull 是本地有 repository 时，将远程 repository 里新的 commit 数据(如有的话)下载过来，并且与本地代码 merge。&lt;/p></description></item><item><title>github 删除仓库</title><link>https://www.carlos2016.cfd/p/github-%E5%88%A0%E9%99%A4%E4%BB%93%E5%BA%93/</link><pubDate>Fri, 07 Mar 2025 00:00:00 +0000</pubDate><guid>https://www.carlos2016.cfd/p/github-%E5%88%A0%E9%99%A4%E4%BB%93%E5%BA%93/</guid><description>&lt;img src="https://www.carlos2016.cfd/bg/20.webp" alt="Featured image of post github 删除仓库" />&lt;h2 id="前言">前言
&lt;/h2>&lt;p>如何删除以及恢复 github 仓库，图文教程。&lt;/p>
&lt;h2 id="删除-github-仓库">删除 github 仓库
&lt;/h2>&lt;p>仓库主页找到 settings&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250307045850.webp"
data-webp="/00-assets/Pasted%20image%2020250307045850.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250307045850.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250307045850.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250307045850.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>找到 general，往下滑&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250307045959.webp"
data-webp="/00-assets/Pasted%20image%2020250307045959.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250307045959.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250307045959.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250307045959.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>点击如图按钮即可删除 github 仓库。&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250307050056.webp"
data-webp="/00-assets/Pasted%20image%2020250307050056.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250307050056.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250307050056.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250307050056.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;h2 id="恢复-github-仓库">恢复 github 仓库
&lt;/h2>&lt;p>点击头像&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250307052415.webp"
data-webp="/00-assets/Pasted%20image%2020250307052415.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250307052415.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250307052415.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250307052415.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>找到&amp;quot;Deleted repositories&amp;quot;&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250307052450.webp"
data-webp="/00-assets/Pasted%20image%2020250307052450.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250307052450.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250307052450.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250307052450.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p>
&lt;p>即可看到最近的仓库，如果时间太久，会永远删除。如果没有显示，就是删除时间太快，服务器还没有刷新，等一个小时就好。&lt;/p>
&lt;p>
&lt;a data-fancybox="gallery"
href="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250307052617.webp"
data-webp="/00-assets/Pasted%20image%2020250307052617.webp"
data-original="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250307052617.png"
class="webp-fancybox">
&lt;picture>
&lt;source srcset="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250307052617.webp" type="image/webp">
&lt;img src="https://www.carlos2016.cfd/00-assets/Pasted%20image%2020250307052617.png"
alt=""
loading="lazy"
data-fallback>
&lt;/picture>
&lt;/a>
&lt;/p></description></item></channel></rss>